import './polyfills.server.mjs';
import{e as u}from"./chunk-ISEJRZ4V.mjs";import{b as h}from"./chunk-B7GIMVUJ.mjs";import{k as d,l as m}from"./chunk-EBORJ4EU.mjs";import{Gc as g,Q as o,W as r,ad as l,va as c}from"./chunk-HFRIEXOR.mjs";var p=class n{meta=r(d);titleService=r(m);document=r(g);router=r(u);translate=r(h);platformId=r(c);isBrowser=l(this.platformId);defaultImage="https://alt-db-darna.netlify.app/favicon.ico";baseUrl="https://db-darna.netlify.app";updateSEOFromBackend(t,e={updateLinks:!0,fallbackToDefault:!1}){this.clearExistingMetaTags();let i=t.meta_title,a=t.meta_description;(i||e.fallbackToDefault)&&this.setTitle(i||this.getDefaultTitle()),(a||e.fallbackToDefault)&&this.setDescription(a||this.getDefaultDescription()),this.setAdditionalMetaTags({image:this.defaultImage}),e.updateLinks&&this.updateSEOLinks()}updateSEOTags(t){this.clearExistingMetaTags();let e=this.isSeotag(t)?t.meta_title:t.title,i=this.isSeotag(t)?t.meta_description:t.description;e&&this.setTitle(e),i&&this.setDescription(i),this.setAdditionalMetaTags(t),this.updateSEOLinks()}updateSEOWithCustomData(t,e={}){this.clearExistingMetaTags(),t.meta_title&&this.setTitle(t.meta_title),t.meta_description&&this.setDescription(t.meta_description),this.setCustomMetaTags(e),this.updateSEOLinks()}isSeotag(t){return"meta_title"in t||"meta_description"in t}setTitle(t){if(this.titleService.setTitle(t),this.isBrowser){let e=this.document.querySelector("title");e&&(e.textContent=t)}this.meta.updateTag({name:"title",content:t}),this.meta.updateTag({property:"og:title",content:t}),this.meta.updateTag({property:"twitter:title",content:t})}setDescription(t){this.meta.updateTag({name:"description",content:t}),this.meta.updateTag({property:"og:description",content:t}),this.meta.updateTag({property:"twitter:description",content:t})}setCustomMetaTags(t){let e=this.translate.currentLang;t.keywords?this.meta.updateTag({name:"keywords",content:t.keywords}):e==="ar"&&this.meta.updateTag({name:"keywords",content:"\u062F\u0627\u0631\u0646\u0627, \u0644\u0628\u0646\u0627\u0621 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062A, \u0627\u0644\u0645\u0634\u0627\u0631\u064A\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u064A\u0629"});let i=t.image||this.defaultImage;this.meta.updateTag({property:"og:image",content:i}),this.meta.updateTag({property:"twitter:image",content:i});let a=t.type||"website";this.meta.updateTag({property:"og:type",content:a}),this.meta.updateTag({property:"twitter:card",content:"summary_large_image"}),t.author&&this.meta.updateTag({name:"author",content:t.author})}setAdditionalMetaTags(t){if(this.translate.currentLang==="ar"){let a=!this.isSeotag(t)&&t.keywords?t.keywords:"\u062F\u0627\u0631\u0646\u0627, \u0644\u0628\u0646\u0627\u0621 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062A, \u0627\u0644\u0645\u0634\u0627\u0631\u064A\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u064A\u0629";this.meta.updateTag({name:"keywords",content:a})}let i=!this.isSeotag(t)&&t.image?t.image:this.defaultImage;this.meta.updateTag({property:"og:image",content:i}),this.meta.updateTag({property:"twitter:image",content:i}),this.meta.updateTag({property:"og:type",content:"website"}),this.meta.updateTag({property:"twitter:card",content:"summary_large_image"}),!this.isSeotag(t)&&t.author&&this.meta.updateTag({name:"author",content:t.author})}updateSEOLinks(){let t=this.translate.currentLang,i=this.router.url.replace(/^\/(ar|en)/,""),a=i==="/"?"":i,s=`${this.baseUrl}/${t}${a}`;this.updateCanonicalLink(s),this.updateAlternateLinks(s,a),this.meta.updateTag({property:"og:url",content:s})}updateCanonicalLink(t){if(!this.isBrowser)return;let e=this.document.querySelector('link[rel="canonical"]');e&&e.remove();let i=this.document.createElement("link");i.setAttribute("rel","canonical"),i.setAttribute("href",t),this.document.head.appendChild(i)}updateAlternateLinks(t,e){if(!this.isBrowser)return;this.document.querySelectorAll('link[rel="alternate"]').forEach(v=>v.remove());let a=this.translate.currentLang,s=a==="ar"?"en":"ar",S=`${this.baseUrl}/${s}${e}`;this.addAlternateLink("x-default",`${this.baseUrl}/ar${e}`),this.addAlternateLink(a,t),this.addAlternateLink(s,S)}addAlternateLink(t,e){if(!this.isBrowser)return;let i=this.document.createElement("link");i.setAttribute("rel","alternate"),i.setAttribute("hreflang",t),i.setAttribute("href",e),this.document.head.appendChild(i)}clearExistingMetaTags(){["name='title'","property='og:title'","property='twitter:title'","name='description'","property='og:description'","property='twitter:description'","property='og:image'","property='twitter:image'","name='keywords'","property='og:url'","property='og:type'","property='twitter:card'","name='author'"].forEach(e=>this.meta.removeTag(e))}getDefaultTitle(){return this.translate.currentLang==="ar"?"\u062F\u0627\u0631\u0646\u0627 - \u0634\u0631\u0643\u0629 \u0631\u0627\u0626\u062F\u0629 \u0641\u064A \u0627\u0644\u0628\u0646\u0627\u0621 \u0648\u0627\u0644\u062A\u0637\u0648\u064A\u0631 \u0627\u0644\u0639\u0642\u0627\u0631\u064A":"Darna - Leading Construction and Real Estate Development Company"}getDefaultDescription(){return this.translate.currentLang==="ar"?"\u062F\u0627\u0631\u0646\u0627 \u0634\u0631\u0643\u0629 \u0631\u0627\u0626\u062F\u0629 \u0641\u064A \u0645\u062C\u0627\u0644 \u0627\u0644\u0628\u0646\u0627\u0621 \u0648\u0627\u0644\u062A\u0637\u0648\u064A\u0631 \u0627\u0644\u0639\u0642\u0627\u0631\u064A\u060C \u0646\u0642\u062F\u0645 \u0623\u0641\u0636\u0644 \u0627\u0644\u062D\u0644\u0648\u0644 \u0648\u0627\u0644\u0645\u0634\u0627\u0631\u064A\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u064A\u0629 \u0627\u0644\u0645\u062A\u0645\u064A\u0632\u0629":"Darna is a leading company in construction and real estate development, providing the best solutions and outstanding real estate projects"}setDefaultSEOTags(){let t={meta_title:this.getDefaultTitle(),meta_description:this.getDefaultDescription(),page_name:"default"};this.updateSEOFromBackend(t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=o({token:n,factory:n.\u0275fac,providedIn:"root"})};var f=class n{seoService=r(p);updateBlogSEO(t,e){let i={meta_title:t.meta_title||e.title||"",meta_description:t.meta_description||this.extractDescription(e.content||""),page_name:t.page_name||"blog"};this.seoService.updateSEOWithCustomData(i,{image:e.image,type:"article",author:e.author||"\u062F\u0627\u0631\u0646\u0627"})}updateProjectSEO(t,e){let i={meta_title:t.meta_title||e.title||"",meta_description:t.meta_description||e.description||"",page_name:t.page_name||"project"};this.seoService.updateSEOWithCustomData(i,{image:e.image,type:"website"})}updatePageSEO(t){this.seoService.updateSEOFromBackend(t)}updateSEOWithFallback(t){t&&(t.meta_title||t.meta_description)?this.seoService.updateSEOFromBackend(t):this.seoService.setDefaultSEOTags()}updateUniversalSEO(t,e={}){let i={meta_title:t.meta_title||e.title||"",meta_description:t.meta_description||e.description||this.extractDescription(e.content||""),page_name:t.page_name||"page"};this.seoService.updateSEOWithCustomData(i,{image:e.image,type:e.type||"website",author:e.author})}extractDescription(t){if(!t)return"";let e=t.replace(/<[^>]*>/g,"").trim();return e.length>160?e.substring(0,157)+"...":e}isSEODataValid(t){return!!(t.meta_title&&t.meta_description)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=o({token:n,factory:n.\u0275fac,providedIn:"root"})};export{f as a};
